<!DOCTYPE html>
<html>
  <head>
    <title>Comments</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <main class="container d-flex flex-column align-items-center justify-content-center">
        <section class="p-5 ">
            <h1 class="text-center">Comments</h1>
            <!-- <ul class="list-group">
              {% for comment in comments %}
              <li class="list-group-item">
               <h5>{{ comment.snippet.topLevelComment.snippet.authorDisplayName.replace('@', '') }}</h5>
               <p>{{comment.snippet.topLevelComment.snippet.textDisplay }}</p> 
              </li>
              {% endfor %}
            </ul> -->
            <div class="table-responsive">
              <table class="table table-hover align-middle ">
                <thead>
                  <tr class="align-middle ">
                    <th scope="col">#</th>
                    <th scope="col">Username</th>
                    <th scope="col">Comments</th>
                  </tr> 
                </thead>
                <tbody class="table-group-divider">
                  {% for comment in comments %}
                  <tr class="align-middle ">
                    <th scope="row"></th>
                    <td class="text-dark h6">{{ comment.snippet.topLevelComment.snippet.authorDisplayName.replace('@', '') }}</td>
                    
                    <td>{{comment.snippet.topLevelComment.snippet.textDisplay }}</td>
                    <td>
                      {% if comment.sentiment %}
                      <ul class="d-flex gap-3 text-center ">
                          <p>Positive <br>{{ comment.sentiment.pos *100 }}%</p>
                          <p>Negative <br>{{ comment.sentiment.neg *100 }}%</p>
                          <p>Neutral <br> {{ comment.sentiment.neu *100 }}%</p>
                          <p>Compound <br>{{ comment.sentiment.compound *100 }}%</p>
                      </ul>
                      {% else %}
                      N/A
                      {% endif %}
                  </td>
                  </tr>
                  {% endfor %}  
                </tbody>
              </table>
              
            </div>
            
        </section>
        <footer class="footer bg-light text-dark py-4">
            <div class="container text-center">
              <p>&copy; 2024 Code with ‚ù§ by <a href="https://github.com/hmzi67" class="text-dark ">Hamza Waheed Abbasi</a></p>
            </div>
        </footer>
          
        
    </main>
    
    <script>
      document.getElementById('sentiment-analyzer').addEventListener('click', function() {
          analyzeSentiments();
      });

      function analyzeSentiments() {
          // AJAX request to trigger sentiment analysis
          $.ajax({
              type: 'GET', // Change to GET if you're retrieving the comments from the server
              url: '/analyze_sentiments', // URL to trigger sentiment analysis
              success: function(response) {
                  alert('Sentiment analysis completed!');
                  // Handle sentiment analysis results if needed
              }
          });
      }
  </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
